{
  "recipes": [
    {
      "deploy-serverd": [
        "components:all:deploy",
        "serverd:verify-no-zombies",
        "serverd:verify-hash",
        "serverd:verify-processing"
      ]
    }
  ],
  "components": [
    {
      "all": [
        {
          "hostname": "returns the server's hostname",
          "cmd": "hostname"
        },
        {
          "time": "returns server time",
          "cmd": "date"
        },
        {
          "space": "returns server free space",
          "cmd": "hostname"
        },
        {
          "deploy": "does a chef deploy",
          "cmd": "sudo DEPLOY=1 chef-client",
          "prompt": true
        },
        {
          "chef": "does a chef deploy",
          "cmd": "sudo chef-client",
          "prompt": true
        }
      ],
      "serverd": [
        {
          "stop": {
            "desc": "stops all serverd processes",
            "cmd": "sudo service serverd stop",
            "prompt": true
          },
          "start": {
            "desc": "starts all serverd processes",
            "cmd": "sudo service serverd start",
            "prompt": true
          },
          "restart": {
            "desc": "restarts all serverd processes",
            "cmd": "sudo service serverd restart",
            "prompt": true
          },
          "hash": {
            "desc": "returns the current serverd git hash in /current folder",
            "cmd": "cd /opt/acme/serverd/current && git rev-parse HEAD"
          },
          "verify-hash": {
            "desc": "verifies the hash provided matches",
            "cmd": "cd /opt/acme/serverd/current && git rev-parse HEAD"
          },
          "zombies": {
            "desc": "lists all serverd with currently running zombies",
            "cmd": "hostname"
          },
          "kill-zombies": {
            "desc": "kills all serverd zombies",
            "cmd": "hostname"
          },
          "queue-count": {
            "desc": "reports the serverd queue count",
            "cmd": "filtq --count"
          }
        }
      ],
      "acmelib": [
        {
          "head": {
            "desc": "returns the current acmelib git hash in /current folder",
            "cmd": "cd /opt/acme/acmelib/current && git rev-parse HEAD"
          }
        }
      ]
    }
  ]
}
